        /* --- Estilos para input[type="date"] --- */

        /* Estilo base para input de fecha */
        .todo-item .main-task-header .task-body input[type="date"] {
            background: none;
            border: none; /* El borde se manejará por :not(:valid) y :valid */
            padding: 0;   /* El padding se manejará por :not(:valid) y :valid */
            font-family: 'Lexend', sans-serif;
            font-size: 0.85rem;
            /* Color por defecto para el texto del placeholder y el icono del calendario.
               Este es el color que queremos ver cuando el input está vacío. */
            color: var(--button-color);
            cursor: pointer;
            flex-shrink: 0;
            outline: none;
            transition: color 0.2s ease;
            opacity: 1; /* Asegurar opacidad completa por defecto */
            min-height: 1.5em; /* Asegurar una altura mínima para que sea pulsable */
            box-sizing: border-box; /* Asegurar que padding/border se incluyan en el tamaño total */
        }

        /* Estilo para input de fecha cuando NO es válido (generalmente vacío) */
        .todo-item .main-task-header .task-body input[type="date"]:not(:valid) {
            border: 1px dashed var(--placeholder-color); /* Borde sutil para indicar el área */
            padding: 0 4px; /* Añadir padding para que el borde y el texto tengan espacio */
            /* El color del texto del placeholder se hereda de la regla base del input[type="date"] */
        }

        /* Estilos adicionales para navegadores WebKit (Chrome, Safari en móviles)
           para el texto del placeholder y sus partes cuando el input está vacío. */
        .todo-item .main-task-header .task-body input[type="date"]:not(:valid)::-webkit-datetime-edit-text,
        .todo-item .main-task-header .task-body input[type="date"]:not(:valid)::-webkit-datetime-edit-year-field,
        .todo-item .main-task-header .task-body input[type="date"]:not(:valid)::-webkit-datetime-edit-month-field,
        .todo-item .main-task-header .task-body input[type="date"]:not(:valid)::-webkit-datetime-edit-day-field {
            color: var(--button-color); /* Forzar el color en las partes internas en WebKit */
            opacity: 1; /* Asegurar opacidad completa */
        }

        /* Estilo para input de fecha cuando es válido (tiene fecha) y la tarea NO está completada */
         .todo-item:not(.completed) .main-task-header .task-body input[type="date"]:valid {
            color: var(--text-color); /* Color normal cuando tiene fecha y no es hoy */
            border: none; /* Quitar el borde discontinuo si estaba presente */
            padding: 0; /* Quitar el padding si estaba presente */
        }

        /* Estilo para hover/focus general (se aplica si no está completado) */
        .todo-item:not(.completed) .main-task-header .task-body input[type="date"]:hover,
        .todo-item:not(.completed) .main-task-header .task-body input[type="date"]:focus {
            color: var(--button-hover-color); /* Color de hover general */
            text-decoration: underline;
        }
        /* No es necesario un :hover específico para :valid o :not(:valid) si este es el comportamiento deseado */

        /* Estilo para input de fecha cuando la tarea está completada */
        .todo-item.completed .main-task-header .task-body input[type="date"] {
            color: var(--completed-text-color); /* Color de completado */
            opacity: 0.7; /* Opacidad de completado */
            border: none; /* Asegurar que no tenga borde de :not(:valid) */
            padding: 0; /* Asegurar que no tenga padding de :not(:valid) */
            text-decoration: none; /* Quitar subrayado si lo tenía por hover/focus */
            cursor: default;
        }
        /* Hover/Focus en tareas completadas (no debería cambiar mucho) */
        .todo-item.completed .main-task-header .task-body input[type="date"]:hover,
        .todo-item.completed .main-task-header .task-body input[type="date"]:focus {
            color: var(--completed-text-color); /* Mantener color de completado */
            text-decoration: none; /* Sin subrayado */
        }

        /* Estilo para el icono del calendario en WebKit (opcional, pero puede ayudar) */
        .todo-item .main-task-header .task-body input[type="date"]::-webkit-calendar-picker-indicator {
            opacity: 1;
            /* Algunos navegadores permiten colorear el icono con 'color', otros usan un SVG/imagen.
               Si es una imagen, 'color' no tendrá efecto.
               Si el icono también es invisible, podrías necesitar un filtro o una imagen de fondo personalizada. */
            color: var(--button-color);
        }
        .todo-item.completed .main-task-header .task-body input[type="date"]::-webkit-calendar-picker-indicator {
            opacity: 0.7;
        }

        /* --- Fin Estilos para input[type="date"] --- */
